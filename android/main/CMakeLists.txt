CMAKE_MINIMUM_REQUIRED(VERSION 3.10)
SET(CMAKE_CXX_STANDARD 14)
SET(CMAKE_CXX_STANDARD_REQUIRED ON)
SET(CMAKE_CXX_EXTENSIONS OFF)

GET_FILENAME_COMPONENT(OSG_3RDPARTY_SOURCE_DIR ../../helpers/toolchain_builder ABSOLUTE)
GET_FILENAME_COMPONENT(OSG_SOURCE_DIR ../../../OpenSceneGraph ABSOLUTE)
SET(OSG_3RDPARTY_BUILD_DIR ../../build/3rdparty_android)
SET(OSG_BUILD_DIR ../../build/osg_android)
FILE(MAKE_DIRECTORY ${OSG_3RDPARTY_BUILD_DIR})
FILE(MAKE_DIRECTORY ${OSG_BUILD_DIR})

# Build 3rd-parties and OSG core libraries
ADD_SUBDIRECTORY(${OSG_3RDPARTY_SOURCE_DIR} ${OSG_3RDPARTY_BUILD_DIR})
ADD_SUBDIRECTORY(${OSG_SOURCE_DIR} ${OSG_BUILD_DIR})

# Build main bridge library
ADD_LIBRARY(osgVerseAndroid SHARED
            src/SDL_android_main.c src/main.cpp)
FIND_LIBRARY(ANDROID_LOG_LIB log)
TARGET_LINK_LIBRARIES(osgVerseAndroid SDL2 ${ANDROID_LOG_LIB})
